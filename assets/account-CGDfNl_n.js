import{o as g,c as u,t as o,i as r,a as d,b as m,d as f,S as h,s as i,e as $}from"./index-BZIbGsrH.js";var v=o("<form><div class=field-block><input name=email type=email placeholder=E-post required></div><button class=btn type=submit>Logga in"),b=o('<section class="bg-gray-100 text-gray-700 p-8"><h1 class="text-2xl font-bold">Konto'),_=o("<div><p></p><button class>Logga ut");const[p,c]=u(""),[l,y]=u("");function w(){const a=new URLSearchParams(window.location.search),t=a.get("token_hash"),n=a.get("type");t&&i.auth.verifyOtp({token_hash:t,type:n||"email"}).then(({error:e})=>{e?console.log(e.message):window.history.replaceState({},document.title,"/")})}function k(){i.auth.signInWithOtp({email:p(),options:{emailRedirectTo:window.location.origin+"/account"}})}function S(){i.auth.signOut()}async function x(){y((await i.auth.getUser())?.data?.user?.email??"")}function E(){return g(()=>{w(),x()}),console.log(l()),(()=>{var a=b();return a.firstChild,r(a,d(h,{get when(){return l().length<1},get fallback(){return(()=>{var t=_(),n=t.firstChild,e=n.nextSibling;return r(n,l),e.$$click=S,t})()},get children(){var t=v(),n=t.firstChild,e=n.firstChild;return m(t,"submit",s=>{s.preventDefault(),k(),c("")}),e.$$input=s=>c(s.target.value),f(()=>e.value=p()),t}}),null),a})()}$(["input","click"]);export{E as default};
